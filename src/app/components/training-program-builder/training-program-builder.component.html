<div id="builder-container">
	<h1><span id="title">Nuovo Programma di Allenamento</span></h1>

	<mat-form-field appearance="outline" [style.width.px]="300">
		<mat-label>Nome dell'allenamento</mat-label>
		<input matInput required type="text" [(ngModel)]="trainingProgramName">
	</mat-form-field>

	<mat-accordion>
		<mat-expansion-panel hideToggle *ngFor="let session of this.trainingProgram.session; index as index">
			<mat-expansion-panel-header>
				<mat-panel-title><span id="training-program-day-name">{{session.name}}</span></mat-panel-title>
				<mat-panel-description>Numero esercizi: {{session.exercises.length}}</mat-panel-description>
			</mat-expansion-panel-header>

			<table *ngFor="let session of trainingProgram.session" mat-table [dataSource]="session.exercises" class="mat-elevation-z1">

				<ng-container matColumnDef="Esercizio">
					<th mat-header-cell *matHeaderCellDef><b>Esercizio</b></th>
					<td mat-cell *matCellDef="let element"> {{element.name}} </td>
				</ng-container>

				<ng-container matColumnDef="Serie x Ripetizioni">
					<th mat-header-cell *matHeaderCellDef><b>Serie x Ripetizioni</b></th>
					<td mat-cell *matCellDef="let element"> {{(element.series > 0 && element.reps > 0) ? element.series + "x" + element.reps : "/"}}</td>
				</ng-container>

				<ng-container matColumnDef="Recupero">
					<th mat-header-cell *matHeaderCellDef><b>Recupero</b></th>
					<td mat-cell *matCellDef="let element"> {{(element.restTime != undefined) ? element.restTime : 0}} </td>
				</ng-container>

				<ng-container matColumnDef="RPE">
					<th mat-header-cell *matHeaderCellDef><b>RPE</b></th>
					<td mat-cell *matCellDef="let element"> {{element.RPE > 0 ? element.RPE : "/"}} </td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
				<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
			</table>

			<button mat-stroked-button color="warn" (click)="removeElement(index)">Elimina</button>
		</mat-expansion-panel>
	</mat-accordion>

	<button id="add-session-button" mat-stroked-button color="primary" (click)="onNewSessionBuild()">Aggiungi una sessione</button>

	<button mat-raised-button color="primary" [disabled]="trainingProgramName == undefined || trainingProgramName == ''" (click)="onSaveTrainingProgram()">Salva</button>
	<button id="cancel-button" mat-stroked-button color="warn" (click)="onCancel()">Annulla</button>
</div>
